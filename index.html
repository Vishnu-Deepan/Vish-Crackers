<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vish Fireworks Store</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <header>
    <div class="logo">Vish Fireworks Store</div>
    <div class="nav">
      <a href="#">Home</a>
      <a href="#">Shop</a>
      <a href="#">Contact</a>
    </div>
  </header>

  <div class="container">
    <h1>Explore Our Fireworks Collection</h1>

    <!-- Custom Dropdown for Category Selection -->
    <div class="category-filter">
      <label for="category-dropdown">Select Category:</label>
      <div class="custom-dropdown" id="category-dropdown">
        <span class="dropdown-selected">All Categories</span>
        <ul class="dropdown-list" id="dropdown-list"></ul>
      </div>
    </div>

    <div id="products"></div>
  </div>

  <footer>
    <p>© 2025 Fireworks Shop. All Rights Reserved.</p>
  </footer>

  <script src="products.js"></script>
  <script>
    // Function to display products based on selected category
    function displayProducts(selectedCategory = 'all') {
      const productsContainer = document.getElementById('products');
      productsContainer.innerHTML = '';  // Clear previous content

      // Loop through categories and display products
      productsData.forEach(category => {
        if (selectedCategory === 'all' || selectedCategory === category.category) {
          const categorySection = document.createElement('section');

          const categoryTitle = document.createElement('h2');
          categoryTitle.classList.add('category-title');
          categoryTitle.textContent = category.category;
          categorySection.appendChild(categoryTitle);

          const productGrid = document.createElement('div');
          productGrid.classList.add('product-grid');

          // Loop through items in the selected category
          category.items.forEach(item => {
            const productCard = document.createElement('div');
            productCard.classList.add('product-card');

            const productImage = document.createElement('img');
            productImage.src = item.image || 'assets/placeholder.jpg';
            productCard.appendChild(productImage);

            const productContent = document.createElement('div');
            productContent.classList.add('product-card-content');

            const productName = document.createElement('div');
            productName.classList.add('product-name');
            productName.textContent = item.name;
            productContent.appendChild(productName);

            const productPrice = document.createElement('div');
            productPrice.classList.add('product-price');
            productPrice.textContent = `₹${item.price.toFixed(2)}`;
            productContent.appendChild(productPrice);

            const originalPrice = document.createElement('div');
            originalPrice.classList.add('product-original-price');
            originalPrice.textContent = `₹${item.originalPrice.toFixed(2)}`;
            productContent.appendChild(originalPrice);

            const productUnit = document.createElement('div');
            productUnit.classList.add('product-unit');
            productUnit.textContent = item.unit;
            productContent.appendChild(productUnit);

            productCard.appendChild(productContent);
            productGrid.appendChild(productCard);
          });

          categorySection.appendChild(productGrid);
          productsContainer.appendChild(categorySection);
        }
      });
    }

    // Event listener for category selection in dropdown
    function populateCategoryDropdown() {
      const dropdownList = document.getElementById('dropdown-list');
      productsData.forEach(category => {
        const listItem = document.createElement('li');
        listItem.classList.add('dropdown-item');
        listItem.dataset.value = category.category;

        const image = document.createElement('img');
        image.src = category.image || "assets/placeholder.jpg";
        image.classList.add('dropdown-item-image');

        const text = document.createElement('span');
        text.classList.add('dropdown-item-text');
        text.textContent = category.category;

        listItem.appendChild(image);
        listItem.appendChild(text);

        listItem.addEventListener('click', function () {
          document.querySelector('.dropdown-selected').textContent = category.category;
          displayProducts(category.category);
          toggleDropdown();
        });

        dropdownList.appendChild(listItem);
      });
    }

    // Toggle the dropdown visibility
    function toggleDropdown() {
      const dropdownList = document.getElementById('dropdown-list');
      dropdownList.classList.toggle('show');
    }

    // Event listener for dropdown toggle
    document.getElementById('category-dropdown').addEventListener('click', toggleDropdown);

    // Close dropdown if clicked outside
    document.addEventListener('click', function (event) {
      if (!event.target.closest('.custom-dropdown')) {
        const dropdownList = document.getElementById('dropdown-list');
        dropdownList.classList.remove('show');
      }
    });

    // Initialize dropdown and show all products by default
    window.onload = function () {
      populateCategoryDropdown();
      displayProducts();
    };
  </script>

</body>
</html>
